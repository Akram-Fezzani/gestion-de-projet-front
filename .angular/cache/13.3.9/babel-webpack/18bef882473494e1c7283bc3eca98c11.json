{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { AppComponent } from 'src/app/app.component';\nimport { AuthLoginInfo } from 'src/app/models/login-info';\nlet LoginComponent = class LoginComponent {\n  constructor(authService, router, ts) {\n    this.authService = authService;\n    this.router = router;\n    this.ts = ts;\n    this.form = {};\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n  }\n\n  login() {\n    this.authService.login(new AuthLoginInfo(this.form.username, this.form.password)).subscribe(data => {\n      this.isLoginFailed = false;\n      const id = this.ts.getId() + \"\";\n      this.authService.getcurrentuser(id).subscribe(data => {\n        this.currentUser = data;\n        AppComponent.instance.setCurrentUser(this.currentUser);\n        this.router.navigate(['/']);\n      }, error => {\n        this.isLoginFailed = true;\n      });\n    }, error => {\n      this.errorMessage = error.error.message;\n      this.isLoginFailed = true;\n    });\n  }\n\n  getcurrentuser() {\n    const id = this.ts.getId() + \"\";\n    this.authService.getcurrentuser(id).subscribe(r => {\n      console.log(r);\n    }, error => console.log(error));\n  }\n\n  ngOnInit() {}\n\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module"}